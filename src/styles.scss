@import url("https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&family=Roboto&display=swap");
@import url("https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Round|Material+Icons+Outlined|Material+Icons+Sharp");

$bg-color: rgba(217, 217, 217, 0.1);

$nav-height: 4rem;

$border: 0.25rem;
$gap: 1rem;
$padding: 5rem;
$size: 9rem;

body {
	font-family: Roboto, "Helvetica Neue", sans-serif;
	margin: 0;

	nav,
	main,
	footer {
		padding-left: $padding;
		padding-right: $padding;
	}
}

body {
	min-height: 100vh;
	overflow: hidden;
}
navbar {
	position: fixed;

	// TODO: separete nav into different files
	nav {
		background-color: $bg-color;
		grid-template-columns: 1fr $size minmax(auto, calc((2 * $size + $gap) / 3 * 5)) $size 1fr;
		gap: $gap;
		height: $nav-height;
		padding-top: 0.25 * $gap;
		padding-bottom: 0.25 * $gap;

		.brand {
			gap: $gap;

			.logo {
				width: 2.25 * $gap;
				height: 2.25 * $gap;
			}
		}
		.loading-bar {
			top: calc($nav-height - 3px);
		}
	}
}

.dialog {
	mat-form-field,
	button {
		width: 100%;
	}
}

.choose-icon div {
	display: flex;
	flex-direction: column;
	.icons {
		display: grid;
		grid-template-columns: repeat(6, 1fr);

		button {
			flex-direction: column;
			justify-content: center;
			mat-icon {
				margin: 0 !important;
			}
		}

		.mat-menu-item {
			cursor: pointer;
		}
	}
}
.share-menu button {
	&:hover {
		mat-icon,
		span {
			color: var(--hover-color);
		}
	}

	&:disabled > span {
		text-decoration: line-through;
	}
}

.mat-mdc-form-field-infix {
	width: unset !important;
}
.mdc-icon-button {
	display: inline-flex !important;
}

app-home {
	align-items: center;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	margin: 3rem 1rem 0;
	overflow-y: auto;
	padding-top: 5vh;

	app-section {
		.title {
			margin: 0;
			padding: 0;
			font-size: 1.5rem;
			font-weight: 500;
			text-transform: capitalize;
		}
		.section {
			$size: 7.5rem;
			$gap: 2rem;
			$padding: 3rem;

			margin-bottom: 2rem;
			display: flex;
			gap: $gap;

			.add {
				align-self: flex-start;
				margin-right: 0 !important;
			}

			.blocks {
				user-select: none;
				max-width: calc(100vw - (2 * $padding + $gap + $size));
				width: (($size + $gap) * 5 + $gap);
				min-width: $size;
			}

			.disabled {
				opacity: 0.5;
			}

			.block {
				margin-right: $gap;

				min-width: $size;
				min-height: $size;

				display: inline-flex !important;
				flex-direction: column;
				justify-content: center;
				align-items: center;

				border-radius: 0.5rem;
				background-color: $bg-color;
				color: #fff;
				cursor: pointer;
				transition: background-color 0.2s ease-in-out;

				:first-child {
					font-size: 2rem;
					height: 2rem;
					width: 2rem;
				}
			}
		}
	}
}

app-profile {
	.profile {
		position: relative;
		grid-template-columns: $size calc((2 * $size + $gap) / 3 * 5) $size;
		gap: $gap;
		height: calc(100vh - ($nav-height + $gap));
		top: $nav-height + $gap;
		overflow-y: scroll;
		.menu {
			gap: $gap;
			.block {
				height: $size;
				width: $size;
			}
		}
		.main {
			gap: $gap / 2;
			grid-template-rows: $size 0 auto;
		}
	}
}

app-lesson {
	.lesson {
		position: relative;
		grid-template-columns: $size calc((2 * $size + $gap) / 3 * 5) $size;
		gap: $gap;
		height: calc(100vh - ($nav-height));
		top: $nav-height;
		padding-top: $gap;
		overflow-y: scroll;
		.menu {
			gap: $gap;
			.block {
				height: $size;
				width: $size;
			}
			&.flashcards :nth-child(1).block,
			&.learn :nth-child(2).block,
			&.quiz :nth-child(3).block,
			&.comments :nth-child(4).block {
				border-right: $border solid;
				transition: color 0.25s ease-in-out, border-right 0.25s ease-in-out;
			}
		}
	}
	.comments .main {
		// gap: 2 $gap;
		grid-template-rows: $size auto;
	}
	.main {
		display: grid;
		grid-template-rows: $size calc(2 * $size + $gap) auto;
		gap: $gap;
		margin-bottom: $size / 2;

		.label {
			height: $size;
		}
		& > .flashcard {
			height: 2 * $size + $gap;
		}
		.flashcards {
			gap: $gap;
		}
		.submit-update {
			gap: $gap;
		}
		&.quiz {
			gap: 2 * $gap;

			section {
				gap: $gap;
			}
		}
		.comments {
			gap: $gap;
		}
	}
	.learn {
		mat-card.flashcard mat-card-actions {
			padding: $gap;
			form {
				gap: $gap;
			}
		}
		.hint {
			gap: $gap;
		}
	}
}

mat-chip-set.overflow {
	overflow: auto;
	.mdc-evolution-chip-set__chips {
		flex-wrap: nowrap;
		flex-flow: nowrap;
	}
}
errors {
	font-style: italic;
	font-family: "Noto Sans Mono", monospace;
}

* {
	::-webkit-scrollbar {
		height: 0.5rem;
		width: 0.5rem;
	}
	::-webkit-scrollbar-thumb {
		background: #888;
		border-radius: 0.5rem;
	}
	::-webkit-scrollbar-thumb:hover {
		background: #666;
	}
}

.hide-hint .mat-mdc-form-field-bottom-align {
	display: none !important;
}

.nav-input .mdc-text-field--outlined .mat-mdc-form-field-infix {
	height: 2.25rem;
	min-height: 2.25rem;
	padding: 6px 0;
}

.full-width {
	width: 100%;
}

mat-icon > svg {
	fill: currentColor;
}

.chat {
	align-items: flex-start;
	justify-content: flex-end;
	display: flex;
	flex-direction: column;
	height: calc(100vh - $nav-height);
	max-height: calc(100vh - $nav-height);
	right: 0;
	position: absolute;
	bottom: 0;
	overflow-y: hidden;
	#chat {
		align-items: flex-start;
		justify-content: flex-end;
		display: flex;
		flex-direction: column;
		width: 50ch;

		.time {
			align-self: center;
			opacity: 0.75;
			font-size: 0.75rem;
			font-weight: 400;
			margin: 0;
			padding: 0;
			text-align: center;
		}
		.messages {
			margin: 0.25rem 0;
			.message {
				animation: fadeBottom 0.05s linear 1;
				margin: 0.05em;
				padding: 0.25em 1em;
				width: fit-content;
				border-radius: 1em;
				transition: border-radius 0.1s ease-in-out;
			}
			&:has(.user) {
				place-self: flex-end;
			}
		}
		.messages .message + .message {
			border-top-left-radius: 0.1em;
		}
		.messages .message:not(:last-child) {
			border-bottom-left-radius: 0.1em;
		}
	}
}

lesson-create-dialog {
	.create-grid {
		gap: $gap;
		.row1 {
			gap: $gap;
		}
	}
}

.autocomplete {
	div.mat-mdc-text-field-wrapper.mdc-text-field.mdc-text-field--outlined div.mat-mdc-form-field-infix {
		padding-top: 0.75rem;
		padding-bottom: 0.75rem;
	}
	mat-chip-grid {
		height: 2rem;
		mat-chip-row {
			margin-top: 0 !important;
			margin-bottom: 0 !important;
		}
	}
}

@keyframes fadeBottom {
	from {
		transform: translateY(200%);
	}
	to {
		transform: translateY(0);
	}
}

@keyframes flip {
	0% {
		-webkit-transform: rotateY(0);
		transform: rotateY(0);
	}
	49% {
		-webkit-transform: rotateY(-90deg);
		transform: rotateY(-90deg);
	}
	50% {
		-webkit-transform: rotateY(90deg);
		transform: rotateY(90deg);
	}
	100% {
		-webkit-transform: rotateY(0);
		transform: rotateY(0);
	}
}

@keyframes slide-right {
	0% {
		-webkit-transform: translateX(0);
		transform: translateX(0);
		opacity: 1;
	}
	49% {
		-webkit-transform: translateX(-50%);
		transform: translateX(-50%);
		opacity: 0;
	}
	50% {
		-webkit-transform: translateX(50%);
		transform: translateX(50%);
		opacity: 0;
	}
	100% {
		-webkit-transform: rotateY(0);
		transform: rotateY(0);
		opacity: 1;
	}
}

@keyframes slide-left {
	0% {
		-webkit-transform: translateX(0);
		transform: translateX(0);
		opacity: 1;
	}
	49% {
		-webkit-transform: translateX(50%);
		transform: translateX(50%);
		opacity: 0;
	}
	50% {
		-webkit-transform: translateX(-50%);
		transform: translateX(-50%);
		opacity: 0;
	}
	100% {
		-webkit-transform: rotateY(0);
		transform: rotateY(0);
		opacity: 1;
	}
}

@keyframes shake {
	0% {
		-webkit-transform: translateX(0);
		transform: translateX(0);
	}
	20% {
		-webkit-transform: translateX(-10px);
		transform: translateX(-10px);
	}
	40% {
		-webkit-transform: translateX(10px);
		transform: translateX(10px);
	}
	60% {
		-webkit-transform: translateX(-10px);
		transform: translateX(-10px);
	}
	80% {
		-webkit-transform: translateX(10px);
		transform: translateX(10px);
	}
	100% {
		-webkit-transform: translateX(0);
		transform: translateX(0);
	}
}

@keyframes take-cup {
	0% {
		transform: translateX(0%);
	}
	25% {
		transform: translateX(500%);
	}
	75% {
		transform: translateX(500%);
	}
	100% {
		transform: translateX(0%);
	}
}
